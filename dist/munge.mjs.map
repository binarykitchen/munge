{"version":3,"file":"munge.mjs","sources":["../index.js"],"sourcesContent":["const encoder = {\n  TYPES: ['ascii', 'utf8', 'random'],\n  DEFAULT: 'random',\n\n  ascii: function (str) {\n    return str && str.charCodeAt()\n  },\n\n  utf8: function (str) {\n    // toString(16) converts decimal (ascii) to hex\n    var unicode = this.ascii(str).toString(16).toUpperCase()\n\n    // pad with leading zeros to ensure 4 bytes\n    while (unicode.length < 4) {\n      unicode = '0' + unicode\n    }\n\n    return 'x' + unicode\n  },\n\n  random: function (str) {\n    const type = this.TYPES[Math.floor(Math.random() * this.TYPES.length)]\n    return this[type](str)\n  }\n}\n\n/**\n * the one and only public function of this module. It takes any string and munges\n * it according to the options. By default it uses a random encoding.\n *\n *\n * @param {String} str any string to munge, for example 'spacemonkey@moon.com'\n * @param {Object} options for munging\n * @param options.encoding can be 'ascii', 'utf8' or 'random' (default)\n * @return {String} the munged string\n * @api public\n */\nmodule.exports = function (str, options) {\n  const aMunged = []\n  var aChars, i\n\n  //  initialize default options\n  options = options || {}\n\n  if (options.encoding) {\n    // validate encoding option\n    if (encoder.TYPES.indexOf(options.encoding) < 0) {\n      throw Error('Invalid encoding option given: ' + options.encoding)\n    }\n  } else {\n    options.encoding = encoder.DEFAULT\n  }\n\n  if (str) {\n    aChars = str.split('')\n\n    for (i in aChars) {\n      aMunged[i] = '&#' + encoder[options.encoding](aChars[i]) + ';'\n    }\n  }\n\n  return aMunged.join('')\n}\n"],"names":["const","encoder","TYPES","DEFAULT","ascii","str","charCodeAt","utf8","unicode","this","toString","toUpperCase","length","random","Math","floor","module","exports","options","aChars","i","aMunged","encoding","indexOf","Error","split","join"],"mappings":"AAAAA,IAAMC,EAAU,CACdC,MAAO,CAAC,QAAS,OAAQ,UACzBC,QAAS,SAETC,MAAO,SAAUC,UACRA,GAAOA,EAAIC,cAGpBC,KAAM,SAAUF,WAEVG,EAAUC,KAAKL,MAAMC,GAAKK,SAAS,IAAIC,cAGpCH,EAAQI,OAAS,GACtBJ,EAAU,IAAMA,QAGX,IAAMA,GAGfK,OAAQ,SAAUR,UAETI,KADMA,KAAKP,MAAMY,KAAKC,MAAMD,KAAKD,SAAWJ,KAAKP,MAAMU,UAC5CP,KAetBW,OAAOC,QAAU,SAAUZ,EAAKa,OAE1BC,EAAQC,EADNC,EAAU,OAIhBH,EAAUA,GAAW,IAETI,aAENrB,EAAQC,MAAMqB,QAAQL,EAAQI,UAAY,QACtCE,MAAM,kCAAoCN,EAAQI,eAG1DJ,EAAQI,SAAWrB,EAAQE,WAGzBE,MAGGe,KAFLD,EAASd,EAAIoB,MAAM,IAGjBJ,EAAQD,GAAK,KAAOnB,EAAQiB,EAAQI,UAAUH,EAAOC,IAAM,WAIxDC,EAAQK,KAAK"}